<!DOCTYPE html>
<html>

<head>


    <meta charset="UTF-8">


    <title>B 互換性 (Compatibility)</title>


    <link rel="stylesheet" title="Metagraphix Graytone" type="text/css" href="css/ecma.css" media="all"/>
    <link rel="stylesheet" title="Metagraphix NN4" type="text/javascript" href="js/n4.js" media="screen"/>

    <link rel="bookmark" title="Translator"
          href="mailto:TAKI%20%3Coz-07ams&#64;mvh.biglobe.ne.jp%3E"/>
    <link rel="bookmark" title="Site Top"
          href="http://www2u.biglobe.ne.jp/%7Eoz-07ams/"/>
    <link rel="start begin toc" title="ECMA-262 revision 3"
          href="index.html"/>
    <link rel="prev" title="A_Grammar_Summary"
          href="A_Grammar_Summary.html"/>
    <link rel="next" title="Colophon"
          href="Colophon.html"/>

    <link rev="alternate" title="Original Document (PDF format)"
          type="application/pdf" hreflang="en"
          href="http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf"/>


</head>

<body>


<p>
    <a href="#toc">本頁の目次</a>
    <a rel="contents" href="">目次</a>
    <a rel="next" href="Colophon.html">次頁: Colophon</a>
    <a rel="prev" href="A_Grammar_Summary.html">前頁: A_Grammar_Summary</a>
</p>


<div class="section level1">
    <h1 id="section-B">B 互換性 (Compatibility)</h1>


    <div class="section level2">
        <h2 id="section-B.1">B.1 追加構文 (Additional Syntax)</h2>


        <div class="body level2">
            <p>過去の版の ECMAScript は、 8 進数リテラルと 8 進数エスケープシーケンスを規定する追加の構文と意味論を含んでいた。それらはこの版の ECMAScript
                からは取り除かれている。この非公式の補遺は、古い ECMAScript プログラムとの互換性のための 8 進数リテラルと 8 進数エスケープシーケンスの統一構文及び意味論を提示する。</p>
        </div>
        <!-- END of B.1 Body -->


        <div class="section level3">
            <h3 id="section-B.1.1">B.1.1 数値リテラル (Numeric Literals)</h3>


            <div class="body level3">
                <p><a href="7_Lexical_Conventions.html#section-7.8.3">セクション 7.8.3</a> の構文及び意味論を次のように拡張できる:</p>
                <dl class="def">

                    <dt>Syntax</dt>

                    <dd>

                        <dl class="syntax">
                            <dt id="NumericLiteral">NumericLiteral ::</dt>
                            <dd>
                                <a href="7_Lexical_Conventions.html#DecimalLiteral"
                                   class="nonterminal">DecimalLiteral</a></dd>
                            <dd>
                                <a href="9_Type_Conversion.html#HexIntegerLiteral"
                                   class="nonterminal">HexIntegerLiteral</a></dd>
                            <dd>OctalIntegerLiteral</dd>
                            <dd>OctalIntegerLiteral <samp>:</samp><samp>:</samp></dd>
                            <dd>0 OctalDigit</dd>
                            <dd>OctalIntegerLiteral OctalDigit</dd>
                        </dl>
                    </dd>

                    <dt>Semantics</dt>

                    <dd>

                        <ul>
                            <li>
                                <a href="7_Lexical_Conventions.html#NumericLiteral"
                                   class="nonterminal">NumericLiteral</a> :: OctalIntegerLiteral の数学値は
                                OctalIntegerLiteral の数学値である。
                            </li>
                            <li>OctalDigit :: 0 の数学値は 0 である。</li>
                            <li>OctalDigit :: 1 の数学値は 1 である。</li>
                            <li>OctalDigit :: 2 の数学値は 2 である。</li>
                            <li>OctalDigit :: 3 の数学値は 3 である。</li>
                            <li>OctalDigit :: 4 の数学値は 4 である。</li>
                            <li>OctalDigit :: 5 の数学値は 5 である。</li>
                            <li>OctalDigit :: 6 の数学値は 6 である。</li>
                            <li>OctalDigit :: 7 の数学値は 7 である。</li>
                            <li>OctalIntegerLiteral :: 0 OctalDigit の数学値は OctalDigit の数学値である。</li>
                            <li>OctalIntegerLiteral :: OctalIntegerLiteral OctalDigit の数学値は (OctalIntegerLiteral × 8
                                の数学値) ＋ OctalDigit の数学値である。
                            </li>
                        </ul>
                    </dd>

                </dl>

            </div>
            <!-- END of B.1.1 Body -->

        </div>
        <!-- END of B.1.1 -->


        <div class="section level3">
            <h3 id="section-B.1.2">B.1.2 文字列リテラル</h3>


            <div class="body level3">
                <p><a href="7_Lexical_Conventions.html#section-7.8.4">セクション 7.8.4</a> の構文及び意味論を次のように拡張できる:</p>
                <dl class="def">

                    <dt>Syntax</dt>

                    <dd>

                        <dl class="syntax">
                            <dt id="EscapeSequence">EscapeSequence ::</dt>
                            <dd>
                                <a href="7_Lexical_Conventions.html#CharacterEscapeSequence"
                                   class="nonterminal">CharacterEscapeSequence</a></dd>
                            <dd>OctalEscapeSequence</dd>
                            <dd>
                                <a href="7_Lexical_Conventions.html#HexEscapeSequence"
                                   class="nonterminal">HexEscapeSequence</a></dd>
                            <dd>
                                <a href="7_Lexical_Conventions.html#UnicodeEscapeSequence"
                                   class="nonterminal">UnicodeEscapeSequence</a></dd>
                            <dt id="OctalEscapeSequence">OctalEscapeSequence ::</dt>
                            <dd>OctalDigit
                                <small>[lookahead &notin; <a
                                        href="9_Type_Conversion.html#DecimalDigit"
                                        class="nonterminal">DecimalDigit</a>]
                                </small>
                            </dd>
                            <dd>ZeroToThree OctalDigit
                                <small>[lookahead &notin; <a
                                        href="9_Type_Conversion.html#DecimalDigit"
                                        class="nonterminal">DecimalDigit</a>]
                                </small>
                            </dd>
                            <dd>FourToSeven OctalDigit</dd>
                            <dd>ZeroToThree OctalDigit OctalDigit</dd>
                            <dt id="ZeroToThree">ZeroToThree :: one of</dt>
                            <dd>0 1 2 3</dd>
                            <dt id="FourToSeven">FourToSeven :: one of</dt>
                            <dd>4 5 6 7</dd>
                        </dl>
                    </dd>

                    <dt>Semantics</dt>

                    <dd>

                        <ul>
                            <li>
                                <a href="7_Lexical_Conventions.html#EscapeSequence"
                                   class="nonterminal">EscapeSequence</a> :: OctalEscapeSequence の文字値は、
                                OctalEscapeSequence の文字値である。
                            </li>
                            <li>OctalEscapeSequence :: OctalDigit [lookahead &notin; <a
                                    href="9_Type_Conversion.html#DecimalDigit"
                                    class="nonterminal">DecimalDigit</a>] の文字値は、コードポイント値が OctalDigit の数学値である文字である。
                            </li>
                            <li>OctalEscapeSequence :: ZeroToThree OctalDigit [lookahead &notin; <a
                                    href="9_Type_Conversion.html#DecimalDigit"
                                    class="nonterminal">DecimalDigit</a>] の文字値は、コードポイント値が (8 × ZeroToThree の数学値) ＋
                                OctalDigit の数学値 である文字である。
                            </li>
                            <li>OctalEscapeSequence :: FourToSeven OctalDigit の文字値は、コードポイント値が (8 × FourToSeven の数学値) ＋
                                OctalDigit の数学値 である文字である。
                            </li>
                            <li>OctalEscapeSequence :: ZeroToThree OctalDigit OctalDigit の文字値は、コードポイント値が (64 (すなわち 82) ×
                                ZeroToThree の数学値) ＋ (8 × 1 個目の OctalDigit の数学値) ＋ 2 個目の OctalDigit の数学値 である文字である。
                            </li>
                            <li>ZeroToThree :: 0 の数学値は 0 である。</li>
                            <li>ZeroToThree :: 1 の数学値は 1 である。</li>
                            <li>ZeroToThree :: 2 の数学値は 2 である。</li>
                            <li>ZeroToThree :: 3 の数学値は 3 である。</li>
                            <li>FourToSeven :: 4 の数学値は 4 である。</li>
                            <li>FourToSeven :: 5 の数学値は 5 である。</li>
                            <li>FourToSeven :: 6 の数学値は 6 である。</li>
                            <li>FourToSeven :: 7 の数学値は 7 である。</li>
                        </ul>
                    </dd>

                </dl>

            </div>
            <!-- END of B.1.2 Body -->

        </div>
        <!-- END of B.1.2 -->

    </div>
    <!-- END of B.1 -->


    <div class="section level2">
        <h2 id="section-B.2">B.2 追加プロパティ (Additional Properties)</h2>


        <div class="body level2">
            <p>ECMAScript
                実装には標準ネイティブオブジェクトにいくつかの追加プロパティを持つものがある。この非公式の補遺は、そのようなプロパティのために本標準にプロパティまたその意味論作成はせずに、統一形式の意味論を示唆する。</p>
        </div>
        <!-- END of B.2 Body -->


        <div class="section level3">
            <h3 id="section-B.2.1">B.2.1 escape (string)</h3>


            <div class="body level3">
                <p><var>escape</var> 関数はグローバルオブジェクトのプロパティである。これは、ある文字を16進数のエスケープシーケンスに置換した新たな文字列を算出する。</p>

                <p>置き換えられる文字のコードポイント値が 0xFF 以下である場合、 %xx 形式の 2 桁のエスケープシーケンスが用いられる。置き換えられる文字のコードポイント値が 0xFF を超える場合、
                    %uxxxx 形式の 4 桁のエスケープシーケンスが用いられる。</p>

                <p><var>escape</var> 関数が 1 個の引数 <var>string</var> で呼び出されるとき、次のステップが取られる:</p>
                <ol>
                    <li>ToString(<var>string</var>) を呼び出す。</li>
                    <li>Result(1) 内の文字数を算出する。</li>
                    <li><var>R</var> を空文字列とする。</li>
                    <li><var>k</var> を 0 とする。</li>
                    <li><var>k</var> が Result(2) と等しいならば <var>R</var> を返す。</li>
                    <li>Result(1) 内部の位置 <var>k</var> の文字 (16ビット符号なし整数で表される) を取得する。</li>
                    <li>Result(6) が 69 個の非空白文字</li>
                    <li>&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@*_+-./&quot; のうちの一つならば、ステップ
                        13 へ。
                    </li>
                    <li>Result(6) が 256 未満ならば、ステップ 11 へ。</li>
                    <li><var>S</var> を 6 個の文字 &quot;%uwxyz&quot; で構成する文字列とする。 wxyz のところは Resulr(6) の値を符号化する 4 個の 16
                        進数字である。
                    </li>
                    <li>ステップ 14 へ。</li>
                    <li><var>S</var> を 3 個の文字 &quot;%xy&quot; で構成する文字列とする。 xy のところは Resulr(6) の値を符号化する 2 個の 16 進数字である。
                    </li>
                    <li>ステップ 14 へ。</li>
                    <li><var>S</var> を単一の文字 Result(6) を含む文字列とする。</li>
                    <li><var>R</var> を、 <var>R</var> の前の値と <var>S</var> を連結して算出した新しい文字列とする。</li>
                    <li><var>k</var> を 1 増分する。</li>
                    <li>ステップ 5 へ。</li>
                </ol>
                <div class="note">
                    <p><b>NOTE</b> 符号化は部分的に RFC1738 に記述される符号化に基づいているが、本標準で規定する完全な符号化は RFC1738 の内容を考慮せず上述される。</p>
                </div>

            </div>
            <!-- END of B.2.1 Body -->

        </div>
        <!-- END of B.2.1 -->


        <div class="section level3">
            <h3 id="section-B.2.2">B.2.2 unescape (string)</h3>


            <div class="body level3">
                <p><var>unescape</var> 関数はグローバルオブジェクトのプロパティである。これは escape
                    関数が生成しうる並びの各エスケープシーケンスがその表す文字で置き換えられた新しい文字列値を算出する。</p>

                <p><var>unescape</var> 関数が 1 個の引数 <var>string</var> で呼び出されるとき、次のステップが取られる:</p>
                <ol>
                    <li>ToString(<var>string</var>) を呼び出す。</li>
                    <li>Result(1) の文字数を算出する。</li>
                    <li><var>R</var> を空文字列とする。</li>
                    <li><var>k</var> を 0 とする。</li>
                    <li><var>k</var> と Result(2) が等しいならば、 <var>R</var> を返す。</li>
                    <li><var>c</var> を Result(1) 内部の位置 <var>k</var> の文字とする。</li>
                    <li><var>c</var> が % でないならば、ステップ 18 へ。</li>
                    <li><var>k</var> が Result(2)-6 より大きいならば、ステップ 14 へ。</li>
                    <li>Result(1) 内部の位置 <var>k</var>+1 の文字が <var>u</var> でないならば、ステップ 14 へ。</li>
                    <li>Result(1) 内部の位置 <var>k</var>+2, <var>k</var>+3, <var>k</var>+4, <var>k</var>+5 の 4 個の文字全てが 16
                        進数字でないならば、ステップ 14 へ。
                    </li>
                    <li><var>c</var> を、コードポイント値が Result(1) 内部の位置 <var>k</var>+2, <var>k</var>+3, <var>k</var>+4,
                        <var>k</var>+5 の 4 個の 16 進数字で表される整数である文字とする。
                    </li>
                    <li><var>k</var> を 5 増分する。</li>
                    <li>ステップ 18 へ。</li>
                    <li><var>k</var> が Result(2)-3 より大きいならば、ステップ 18 へ。</li>
                    <li>Result(1) 内部の位置 <var>k</var>+1, <var>k</var>+2 の 2 個の文字両方が 16 進数字でないならば、ステップ 18 へ。</li>
                    <li><var>c</var> を、コードポイント値が 2 個の 0 と Result(1) 内部の位置 <var>k</var>+1, <var>k</var>+2 の 2 個の 16
                        進数字で表される整数である文字とする。
                    </li>
                    <li><var>k</var> を 2 増分する。</li>
                    <li><var>R</var> を、 前の <var>R</var> の値と <var>c</var> を連結して算出した新しい文字列値とする。</li>
                    <li><var>k</var> を 1 増分する。</li>
                    <li>ステップ 5 へ。</li>
                </ol>
            </div>
            <!-- END of B.2.2 Body -->

        </div>
        <!-- END of B.2.2 -->


        <div class="section level3">
            <h3 id="section-B.2.3">B.2.3 String.prototype.substr (start, length)</h3>


            <div class="body level3">
                <p><code>substr</code> メソッドは 2 個の引数、 <var>start</var> と <var>length</var> をとり、このオブジェクトを文字列に変換し、文字位置
                    <var>start</var> で開始して <var>length</var> 個の文字 (<var>length</var> が undefined なら文字列の末尾) まで続く部分文字列を返す。
                    <var>start</var> が負ならば、文字列の長さを sourceLength として、それを (sourceLength+<var>start</var>)
                    として扱う。結果は文字列値であり、 String オブジェクトにはならない。次のステップが取られる:</p>
                <ol>
                    <li>ToString を呼出し、引数に <code class="keyword">this</code> 値を与える。</li>
                    <li>ToInteger(<var>start</var>) を呼出す。</li>
                    <li><var>length</var> が undefined ならば、 +&infin; を用いる; そうでないならば、 ToInteger(<var>length</var>) を呼出す。
                    </li>
                    <li>Result(1) の文字数を算出する。</li>
                    <li>Result(2) 正または 0 ならば、 Result(2) を用いる; そうでないならば max(Result(4)+Result(2),0) を用いる。</li>
                    <li>min(max(Result(3),0), Result(4)-Result(5)) を算出する。</li>
                    <li>Result(6) &le; 0 ならば、空文字列 &quot;&quot; を返す。</li>
                    <li>Result(1) の位置 Result(5) の文字で開始する Result(6) 個の連続する文字で構成される文字列を返す。</li>
                </ol>
                <p><code>substr</code> メソッドの <var>length</var> プロパティは 2 である。</p>

                <div class="note">
                    <p><b>NOTE</b> <code>substr</code> 関数は故意に汎用的である; <code class="keyword">this</code> 値が String
                        オブジェクトであることを要求しない。それゆえ、他の種類のオブジェクトにメソッドとして転用されうる。</p>
                </div>

            </div>
            <!-- END of B.2.3 Body -->

        </div>
        <!-- END of B.2.3 -->


        <div class="section level3">
            <h3 id="section-B.2.4">B.2.4 Date.prototype.getYear ( )</h3>


            <div class="body level3">
                <div class="note">
                    <p><b>NOTE</b> &quot;2000 年問題&quot; を回避するため、ほぼ全ての目的で getFullYear メソッドが好まれる。</p>
                </div>

                <p><code>getYear</code> メソッドが引数無しで呼出される時、次のステップが取られる:</p>
                <ol>
                    <li><var>t</var> をこの時間値とする。</li>
                    <li><var>t</var> が NaN ならば、 NaN を返す。</li>
                    <li>YearFromTime(LocalTime(<var>t</var>)) - 1900 を返す。</li>
                </ol>
            </div>
            <!-- END of B.2.4 Body -->

        </div>
        <!-- END of B.2.4 -->


        <div class="section level3">
            <h3 id="section-B.2.5">B.2.5 Date.prototype.setYear (year)</h3>


            <div class="body level3">
                <div class="note">
                    <p><b>NOTE</b> &quot;2000 年問題&quot; を回避するため、ほぼ全ての目的で setFullYear メソッドが好まれる。</p>
                </div>

                <p><code>setYear</code> メソッドが 1 個の引数 <var>year</var> で呼出される時、次のステップが取られる:</p>
                <ol>
                    <li><var>t</var> を LocalTime(この時間値) の結果とする; しかし、この時間値が NaN ならば、 <var>t</var> を +0 とする。</li>
                    <li>ToNumber(<var>year</var>) を呼出す。</li>
                    <li>Result(2) が NaN ならば、this 値の [[Value]] プロパティを NaN に設定し、 NaN を返す。</li>
                    <li>Result(2) が NaN でなく、かつ 0 &le; ToInteger(Result(2)) &le; 99 ならば、 Result(4) は ToInteger(Result(2))
                        + 1900 である。そうでないならば、 Result(4) は Result(2) である。
                    </li>
                    <li>MakeDay(Result(4), MonthFromTime(<var>t</var>), DateFromTime(<var>t</var>)) を算出する。</li>
                    <li>UTC(MakeDate(Result(5), TimeWithinDay(<var>t</var>))) を算出する。</li>
                    <li><code class="keyword">this</code> 値の [[Value]] プロパティを TimeClip(Result(6)) に設定する。</li>
                    <li><code class="keyword">this</code> 値の [[Value]] プロパティの値を返す。</li>
                </ol>
            </div>
            <!-- END of B.2.5 Body -->

        </div>
        <!-- END of B.2.5 -->


        <div class="section level3">
            <h3 id="section-B.2.6">B.2.6 Date.prototype.toGMTString ( )</h3>


            <div class="body level3">
                <div class="note">
                    <p><b>NOTE</b> プロパティ toUTCString が望ましい。 <code>toGMTString</code> プロパティは主に古いコードとの互換性のために提供される。新たな
                        ECMAScript コード内では toUTCString プロパティが用いられることを推奨する。</p>
                </div>

                <p>Date.prototype.<code>toGMTString</code> の初期値である Function オブジェクトは、 Date.prototype.toUTCString の初期値である
                    Function オブジェクトと同じである。</p>
            </div>
            <!-- END of B.2.6 Body -->

        </div>
        <!-- END of B.2.6 -->

    </div>
    <!-- END of B.2 -->

</div>
<!-- END of B -->

<h1>Page Contents</h1>
<ul id="toc">
    <li><a href="#section-B">B 互換性 (Compatibility)</a>
        <ul>
            <li><a href="#section-B.1">B.1 追加構文 (Additional Syntax)</a>
                <ul>
                    <li><a href="#section-B.1.1">B.1.1 数値リテラル (Numeric Literals)</a></li>
                    <li><a href="#section-B.1.2">B.1.2 文字列リテラル</a></li>
                </ul>
            </li>
            <li><a href="#section-B.2">B.2 追加プロパティ (Additional Properties)</a>
                <ul>
                    <li><a href="#section-B.2.1">B.2.1 escape (string)</a></li>
                    <li><a href="#section-B.2.2">B.2.2 unescape (string)</a></li>
                    <li><a href="#section-B.2.3">B.2.3 String.prototype.substr (start, length)</a></li>
                    <li><a href="#section-B.2.4">B.2.4 Date.prototype.getYear ( )</a></li>
                    <li><a href="#section-B.2.5">B.2.5 Date.prototype.setYear (year)</a></li>
                    <li><a href="#section-B.2.6">B.2.6 Date.prototype.toGMTString ( )</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

<address>

    Translate: <span>Sun Apr  7 08:52:56 2002</span>

<span>TAKI &lt;<a rel="bookmark" title="Translator"
                  href="mailto:TAKI%20%3Coz-07ams@mvh.biglobe.ne.jp%3E"
        >oz-07ams&#64;mvh.biglobe.ne.jp</a>&gt;</span>

</address>

</body>

</html>


<!--
     FILE ARCHIVED ON 20:31:12 Aug 2, 2014 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 16:15:09 Feb 6, 2015.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
